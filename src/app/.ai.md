# App Router Reference

## Location
- **Correct**: `/src/app`
- **Wrong**: `/app`

## ğŸš¨ CRITICAL: Route Groups & Page Structure

### Folder Organization by Purpose

```
src/app/
â”œâ”€â”€ (app)/              # Main app pages with AppLayout (header, nav, etc.)
â”‚   â”œâ”€â”€ page.tsx        # Home page âœ…
â”‚   â”œâ”€â”€ layout.tsx      # Uses AppLayout component
â”‚   â””â”€â”€ dashboard/      # Example: Dashboard page
â”‚
â”œâ”€â”€ admin/              # Admin pages (separate layout)
â”‚   â”œâ”€â”€ page.tsx        # Admin dashboard
â”‚   â””â”€â”€ layout.tsx      # Admin-specific layout (optional)
â”‚
â”œâ”€â”€ sign-in/            # Auth pages (no app layout)
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ sign-up/
â”‚   â””â”€â”€ page.tsx
â”‚
â””â”€â”€ layout.tsx          # Root layout (global, handles StateProvider + UserInit)
```

### When to Use Which Route Group

**`(app)/` - Main App Pages (with header/nav)**
- General application pages that need the main app layout
- Pages with header, navigation, sidebar, footer
- Examples: dashboard, profile, settings, list pages

**`(detail)/` or `(full-page)/` - Full-Screen Detail Pages (optional)**
- Detail pages that need full screen (no header/nav)
- Modal-style pages or immersive views
- Only create this group when you actually need different layouts
- Examples: photo viewer, document editor, presentation mode

**`admin/` - Admin Pages**
- Administrative features and dashboards
- Can have its own admin-specific layout
- Examples: user management, content moderation, analytics

**Auth Pages (outside groups) - `sign-in/`, `sign-up/`**
- Authentication and onboarding pages
- No app layout needed
- Examples: login, register, forgot-password

### âš ï¸ NEVER create `src/app/page.tsx`
- **WRONG**: `src/app/page.tsx` âŒ (BUILD ERROR!)
- **CORRECT**: `src/app/(app)/page.tsx` âœ…

**Reason**: Since `src/app/(app)/page.tsx` already exists as the home page, creating `src/app/page.tsx` will cause a route conflict and build error.

### Layout Hierarchy

1. **Root Layout** (`src/app/layout.tsx`)
   - Global layout for ALL pages
   - Contains: StateProvider, UserInit, fonts, metadata
   - Server component that can fetch user data

2. **Group Layouts** (optional)
   - `src/app/(app)/layout.tsx` - Main app layout (uses AppLayout component)
   - `src/app/admin/layout.tsx` - Admin layout (if needed)
   - Client components that can access user state

3. **Page-Specific Layouts** (optional)
   - Individual pages can have their own unique layouts
   - Create when a specific page needs different structure

## Rules

### Imports
- Only import page components from `/src/page`
- Layout imports from `/src/page/layout`
- When detail page, you can fetch data

### Next.js 15
- Always `await params`: `const { id } = await params`
- Don't use 'use client' on app router
- Server Component must async function

### Metadata
- Generate metadata when possible
- Keep it simple and relevant to the route

### Detail Pages
Two options for passing data to page component:

**Option 1: Pass ID only**
```tsx
import PageComponent from '@/page/{route}/index'
export default async function Page({ params }) {
  const { id } = await params
  return <PageComponent id={id} />
}
```

**Option 2: Fetch and pass data (SEO critical)**
```tsx
import { api } from '@/api'

export default async function Page({ params }) {
  const { id } = await params
  const data = await api.domain.find(id)
  return <PageComponent initialData={data} />
}
```
