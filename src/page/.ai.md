# Page Component Reference

## Structure

**Always split page into separate section files.** Don't put everything in one file.

```
src/page/{route}/
  ├── index.tsx           # Compose sections only
  ├── hero-section.tsx
  ├── features-section.tsx
  └── cta-section.tsx
```

- `index.tsx` imports and arranges sections
- Each section is its own file
- Keeps code organized and maintainable

## UI Components

- Use shadcn from `@lib/components/ui`
- Tailwind v4
- **Animation**: Tailwind CSS animations by default. For complex effects, use `motion` from `motion/react` (avoid relayout: prefer scale, translate, opacity over x, y, width, height)
- Use regular `<img>` tags (NOT Next.js `<Image>` component - Cloudflare Workers compatibility)
- For initial design: use Unsplash images (`https://images.unsplash.com/...`)
- Icons: use `lucide-react` package

**must write 'use client' at the top of the all page components**

## How to Use Domain State

### Import domain state

```tsx
import { useDomain } from "@/state/{domain}";
import type { DomainType } from "@/state/{domain}/types";
```

### Rules

- One domain hook call per file
- No destructuring - use namespace style
- Access via `domain.field` and `domain.actions.method()`

### Example

```tsx
// ✅ Good: One call, multiple fields
const domain = useDomain((state) => ({
  items: state.items,
  isLoading: state.isLoading,
  actions: state.actions,
}));

// ❌ Bad: Multiple calls for same domain
const items = useDomain((state) => state.items);
const isLoading = useDomain((state) => state.isLoading);

// X Bad: Destructuring
const { items, isLoading } = useDomain();
```

## SSR Detail Pages

### SEO Critical (import data from app router)

```tsx
"use client";
export default function PostDetail({ initialData }) {
  const post = usePost();
  post.actions.setCurrentPost(initialData); // This method must not cause re-render

  /**
   * (생략)
   */
}
```

### Non-SEO (Client loading)

```tsx
"use client";
export default function PostDetail({ id }) {
  const post = usePost((state) => ({
    current: state.current,
    actions: state.actions,
  }));

  useEffect(() => {
    post.actions.loadCurrentPost(id);
  }, [id]);

  /**
   * (생략)
   */
}
```
